<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Installation &mdash; Razy Framework</title>
  <link rel="stylesheet" href="../css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;450;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="../js/docs.js" defer></script>
</head>
<body>
  <header class="site-header"><button class="menu-toggle">&#9776;</button><a href="../index.html" class="header-logo"><span class="logo-icon">R</span> Razy <span class="header-version">v1.0-beta</span></a><nav class="header-nav"><a href="getting-started.html">Docs</a><a href="api-reference.html">API</a><a href="https://github.com/rayfunghk/razy" target="_blank">GitHub</a><button class="theme-toggle">&#x1F319;</button></nav></header>

  <aside class="sidebar"><div class="sidebar-group start-here"><div class="sidebar-group-title">&#x2B50; Start Here</div><a href="quick-start.html" class="sidebar-link">Quick Start (5 min)</a><a href="getting-started.html" class="sidebar-link">Installation</a><a href="standalone.html" class="sidebar-link">Standalone Mode</a><a href="tutorial.html" class="sidebar-link">Tutorial</a><a href="roadmap.html" class="sidebar-link">Learning Roadmap</a><a href="modules.html" class="sidebar-link">Module System</a><a href="routing.html" class="sidebar-link">Routing</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Overview</div><a href="../index.html" class="sidebar-link">Introduction</a><a href="architecture.html" class="sidebar-link">Architecture</a><a href="cli.html" class="sidebar-link">CLI Commands</a></div><div class="sidebar-group"><div class="sidebar-group-title">Module Development</div><a href="module-structure.html" class="sidebar-link">Module Structure</a><a href="controller.html" class="sidebar-link">Controller</a><a href="agent.html" class="sidebar-link">Agent</a><a href="events.html" class="sidebar-link">Event System</a><a href="cross-module-api.html" class="sidebar-link">Cross-Module API</a><a href="plugins.html" class="sidebar-link">Plugin System</a></div><div class="sidebar-group"><div class="sidebar-group-title">Routing &amp; Flow</div><a href="middleware.html" class="sidebar-link">Middleware</a><a href="pipeline.html" class="sidebar-link">Pipeline</a><a href="validation.html" class="sidebar-link">Validation</a><a href="container.html" class="sidebar-link">DI Container</a><a href="env.html" class="sidebar-link">Environment (.env)</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Data &amp; Storage</div><a href="database.html" class="sidebar-link">Database</a><a href="orm.html" class="sidebar-link">ORM</a><a href="collection.html" class="sidebar-link">Collection</a><a href="configuration.html" class="sidebar-link">Configuration</a><a href="cache.html" class="sidebar-link">Cache</a><a href="hashmap.html" class="sidebar-link">HashMap</a><a href="yaml.html" class="sidebar-link">YAML</a><a href="queue.html" class="sidebar-link">Queue</a></div><div class="sidebar-group"><div class="sidebar-group-title">Rendering</div><a href="template.html" class="sidebar-link">Template Engine</a><a href="dom.html" class="sidebar-link">DOM Builder</a><a href="simple-syntax.html" class="sidebar-link">Simple Syntax</a></div><div class="sidebar-group"><div class="sidebar-group-title">IO &amp; Communication</div><a href="httpclient.html" class="sidebar-link">HTTP Client</a><a href="xhr.html" class="sidebar-link">XHR</a><a href="sse.html" class="sidebar-link">SSE</a><a href="websocket.html" class="sidebar-link">WebSocket</a><a href="mailer.html" class="sidebar-link">Mailer</a><a href="simplified-message.html" class="sidebar-link">SimplifiedMessage</a><a href="filereader.html" class="sidebar-link">FileReader</a><a href="ftp-sftp.html" class="sidebar-link">FTP &amp; SFTP</a><a href="notification.html" class="sidebar-link">Notification</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Security</div><a href="crypt.html" class="sidebar-link">Crypt</a><a href="csrf.html" class="sidebar-link">CSRF Protection</a><a href="session.html" class="sidebar-link">Session</a><a href="oauth2.html" class="sidebar-link">OAuth2</a><a href="office365sso.html" class="sidebar-link">Office 365 SSO</a><a href="authenticator.html" class="sidebar-link">Authenticator (TOTP/HOTP)</a><a href="authmanager.html" class="sidebar-link">Auth Manager &amp; Gate</a><a href="ratelimiter.html" class="sidebar-link">Rate Limiter</a></div><div class="sidebar-group"><div class="sidebar-group-title">Observability</div><a href="logging.html" class="sidebar-link">Logging</a><a href="profiler.html" class="sidebar-link">Profiler</a><a href="error-handling.html" class="sidebar-link">Error Handling</a></div><div class="sidebar-group"><div class="sidebar-group-title">Advanced</div><a href="thread.html" class="sidebar-link">Thread &amp; ThreadManager</a><a href="worker-lifecycle.html" class="sidebar-link">Worker Lifecycle</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Deployment</div><a href="sites-configuration.html" class="sidebar-link">Sites Configuration</a><a href="packaging.html" class="sidebar-link">Packaging &amp; Distribution</a><a href="publishing.html" class="sidebar-link">Repository &amp; Publishing</a><a href="caddy-worker.html" class="sidebar-link">Caddy Worker Mode</a></div><div class="sidebar-group"><div class="sidebar-group-title">Reference</div><a href="api-reference.html" class="sidebar-link">API Reference</a><a href="moduleinfo.html" class="sidebar-link">ModuleInfo</a><a href="utilities.html" class="sidebar-link">Utility Functions</a><a href="testing.html" class="sidebar-link">Testing</a></div></aside>
  <div class="sidebar-overlay"></div>

  <main class="main-content">
    <h1>Installation</h1>

    <h2 id="requirements">Requirements</h2>
    <table>
      <thead><tr><th>Requirement</th><th>Version</th></tr></thead>
      <tbody>
        <tr><td>PHP</td><td>8.2 or higher</td></tr>
        <tr><td>ext-zip</td><td>Required</td></tr>
        <tr><td>ext-curl</td><td>Required</td></tr>
        <tr><td>ext-json</td><td>Required</td></tr>
        <tr><td>Composer</td><td>Latest recommended</td></tr>
      </tbody>
    </table>

    <h2 id="installation">Install via Composer</h2>
    <pre><code>composer require rayfunghk/razy</code></pre>

    <h2 id="build-environment">Build the Environment</h2>
    <p>After installing, use the Razy CLI to build the working environment:</p>
    <pre><code><span class="hl-cmt"># Build Razy environment (creates required directories)</span>
php Razy.phar build

<span class="hl-cmt"># Initialize a new distributor</span>
php Razy.phar init dist mysite

<span class="hl-cmt"># Generate .htaccess rewrite rules (Apache/Nginx)</span>
php Razy.phar rewrite mysite</code></pre>

    <div class="callout callout-info">
      <strong>Note:</strong> Always run <code>php Razy.phar rewrite</code> after creating a new distributor, adding/removing sites, domains, or aliases.
    </div>

    <h2 id="directory-structure">Directory Structure</h2>
    <p>After building, your project will have this structure:</p>
    <div class="dir-tree">
&#x251C;&#x2500;&#x2500; Razy.phar              <span class="hl-cmt"># Framework binary</span>
&#x251C;&#x2500;&#x2500; config.inc.php         <span class="hl-cmt"># Global configuration</span>
&#x251C;&#x2500;&#x2500; sites.inc.php          <span class="hl-cmt"># Domain &mdash; distributor mapping</span>
&#x251C;&#x2500;&#x2500; index.php              <span class="hl-cmt"># Web entry point</span>
&#x251C;&#x2500;&#x2500; .htaccess              <span class="hl-cmt"># Apache rewrite rules</span>
&#x251C;&#x2500;&#x2500; shared/
&#x2502;  &#x251C;&#x2500;&#x2500; module/            <span class="hl-cmt"># Cross-distributor modules</span>
&#x251C;&#x2500;&#x2500; sites/
&#x2502;  &#x251C;&#x2500;&#x2500; mysite/            <span class="hl-cmt"># Your distributor</span>
&#x2502;      &#x251C;&#x2500;&#x2500; dist.php       <span class="hl-cmt"># Distributor config</span>
&#x2502;      &#x251C;&#x2500;&#x2500; vendor/        <span class="hl-cmt"># Modules</span>
&#x2502;          &#x251C;&#x2500;&#x2500; module/
&#x2502;              &#x251C;&#x2500;&#x2500; module.php
&#x2502;              &#x251C;&#x2500;&#x2500; default/
&#x2502;                  &#x251C;&#x2500;&#x2500; package.php
&#x2502;                  &#x251C;&#x2500;&#x2500; controller/
&#x251C;&#x2500;&#x2500; data/                  <span class="hl-cmt"># Global data storage</span>
    </div>

    <h2 id="site-configuration">Site Configuration</h2>
    <p>Map domains to distributors in <code>sites.inc.php</code>:</p>
    <pre><code><span class="hl-kw">return</span> [
    <span class="hl-str">'domains'</span> => [
        <span class="hl-str">'localhost'</span> => [
            <span class="hl-str">'/mysite'</span> => <span class="hl-str">'mysite'</span>,
            <span class="hl-str">'/dev'</span>    => <span class="hl-str">'mysite@dev'</span>,     <span class="hl-cmt">// Tag version</span>
        ],
        <span class="hl-str">'example.com'</span> => [
            <span class="hl-str">'/'</span> => <span class="hl-str">'production'</span>,
        ],
    ],
];</code></pre>

    <h2 id="distributor-config">Distributor Configuration</h2>
    <p>Each distributor has a <code>dist.php</code> controlling modules and behavior:</p>
    <pre><code><span class="hl-kw">return</span> [
    <span class="hl-str">'dist'</span>             => <span class="hl-str">'mysite'</span>,
    <span class="hl-str">'global_module'</span>    => <span class="hl-kw">true</span>,
    <span class="hl-str">'autoload_shared'</span>  => <span class="hl-kw">true</span>,
    <span class="hl-str">'greedy'</span>           => <span class="hl-kw">false</span>,
    <span class="hl-str">'modules'</span> => [
        <span class="hl-str">'*'</span> => [
            <span class="hl-str">'vendor/my_module'</span> => <span class="hl-str">'default'</span>,
        ],
        <span class="hl-str">'dev'</span> => [
            <span class="hl-str">'vendor/my_module'</span> => <span class="hl-str">'0.1.0'</span>,
        ],
    ],
];</code></pre>

    <h2 id="interactive-shell">Interactive Shell</h2>
    <p>Test your distributor without configuring <code>sites.inc.php</code>:</p>
    <pre><code><span class="hl-cmt"># Start interactive shell</span>
php Razy.phar runapp mysite

<span class="hl-cmt"># With a specific tag</span>
php Razy.phar runapp mysite@dev</code></pre>
    <p>Inside the shell you can run routes, list modules, call APIs, and more.</p>

    <h2 id="github-installer">GitHub Module Installer</h2>
    <pre><code><span class="hl-cmt"># Install from GitHub (main branch)</span>
php Razy.phar install owner/repo

<span class="hl-cmt"># Install specific branch</span>
php Razy.phar install owner/repo@develop

<span class="hl-cmt"># Install latest release</span>
php Razy.phar install owner/repo --release

<span class="hl-cmt"># Install from private repository</span>
php Razy.phar install owner/private --token=ghp_yourtoken</code></pre>

    
    <h2 id="hello-world">Quick Start: Hello World Module</h2>
    <p>After setting up, create a minimal module to verify everything works:</p>

    <pre><code><span class="hl-cmt">// sites/mysite/myteam/hello/module.php</span>
<span class="hl-kw">return</span> [
    <span class="hl-str">'module_code'</span> =&gt; <span class="hl-str">'myteam/hello'</span>,
    <span class="hl-str">'name'</span>        =&gt; <span class="hl-str">'Hello World'</span>,
    <span class="hl-str">'author'</span>      =&gt; <span class="hl-str">'My Team'</span>,
    <span class="hl-str">'description'</span> =&gt; <span class="hl-str">'A minimal hello world module'</span>,
    <span class="hl-str">'version'</span>     =&gt; <span class="hl-str">'1.0.0'</span>,
];</code></pre>

    <pre><code><span class="hl-cmt">// sites/mysite/myteam/hello/default/package.php</span>
<span class="hl-kw">return</span> [
    <span class="hl-str">'module_code'</span> =&gt; <span class="hl-str">'myteam/hello'</span>,
    <span class="hl-str">'author'</span>      =&gt; <span class="hl-str">'My Team'</span>,
    <span class="hl-str">'description'</span> =&gt; <span class="hl-str">'Hello World module'</span>,
    <span class="hl-str">'version'</span>     =&gt; <span class="hl-str">'1.0.0'</span>,
];</code></pre>

    <pre><code><span class="hl-cmt">// sites/mysite/myteam/hello/default/controller/hello.php</span>
<span class="hl-kw">use</span> <span class="hl-fn">Razy</span>\<span class="hl-fn">Controller</span>;
<span class="hl-kw">use</span> <span class="hl-fn">Razy</span>\<span class="hl-fn">Agent</span>;

<span class="hl-kw">return new class extends</span> <span class="hl-fn">Controller</span> {
    <span class="hl-kw">protected function</span> <span class="hl-fn">__onInit</span>(<span class="hl-fn">Agent</span> <span class="hl-var">$agent</span>): <span class="hl-kw">bool</span>
    {
        <span class="hl-var">$agent</span>-&gt;<span class="hl-fn">addRoute</span>(<span class="hl-str">'/'</span>, <span class="hl-str">'index'</span>);
        <span class="hl-kw">return true</span>;
    }
};</code></pre>

    <pre><code><span class="hl-cmt">// sites/mysite/myteam/hello/default/controller/hello.index.php</span>
<span class="hl-kw">return function</span> () {
    <span class="hl-kw">echo</span> <span class="hl-str">'&lt;h1&gt;Hello, Razy!&lt;/h1&gt;'</span>;
    <span class="hl-kw">echo</span> <span class="hl-str">'&lt;p&gt;Your module is working.&lt;/p&gt;'</span>;
};</code></pre>

    <pre><code class="language-bash"><span class="hl-cmt"># Test with the interactive shell</span>
php Razy.phar runapp mysite
<span class="hl-cmt"># Then visit the route or type: route /</span></code></pre>

    <h2 id="troubleshooting">Troubleshooting</h2>
    <table>
      <thead><tr><th>Symptom</th><th>Cause</th><th>Solution</th></tr></thead>
      <tbody>
        <tr><td><code>Class 'Razy\...' not found</code></td><td>Composer autoloader not loaded</td><td>Run <code>composer dump-autoload</code> and ensure <code>require 'vendor/autoload.php'</code> is present</td></tr>
        <tr><td><code>php Razy.phar</code> shows no output</td><td>PHP CLI version &lt; 8.2</td><td>Run <code>php -v</code> to verify; install PHP 8.2+</td></tr>
        <tr><td><code>ext-zip is missing</code></td><td>Required extension not enabled</td><td>Uncomment <code>extension=zip</code> in <code>php.ini</code> and restart PHP</td></tr>
        <tr><td>White page after <code>build</code></td><td><code>index.php</code> or <code>.htaccess</code> not generated</td><td>Re-run <code>php Razy.phar rewrite &lt;dist&gt;</code></td></tr>
        <tr><td>Route returns 404</td><td>Domain not mapped in <code>sites.inc.php</code></td><td>Add a matching domain &rarr; distributor entry</td></tr>
        <tr><td>Module not loaded</td><td><code>module_code</code> mismatch or missing <code>dist.php</code> entry</td><td>Ensure <code>module.php</code> code matches the folder path and <code>dist.php</code> lists it</td></tr>
        <tr><td>Permission denied on <code>data/</code></td><td>Web server user lacks write access</td><td>Run <code>chmod -R 775 data/</code> or adjust ownership</td></tr>
        <tr><td><code>composer require</code> hangs</td><td>Network / proxy issue</td><td>Try <code>composer config --global repo.packagist composer https://packagist.org</code> or set <code>HTTP_PROXY</code></td></tr>
      </tbody>
    </table>
    <div class="callout callout-info"><strong>Tip:</strong> Run <code>php Razy.phar doctor</code> (if available) to diagnose common environment issues automatically.</div>

    <div class="page-nav">
      <a href="../index.html">
        <span class="label">&larr; Previous</span>
        <span class="title">Introduction</span>
      </a>
      <a href="architecture.html" class="next">
        <span class="label">Next &rarr;</span>
        <span class="title">Architecture</span>
      </a>
    </div>
  </main>

  <footer class="site-footer">
    <span>Razy Framework v1.0-beta  Built by <a href="https://github.com/rayfunghk" target="_blank">Ray Fung</a></span>
    <span><a href="https://github.com/rayfunghk/razy" target="_blank">GitHub</a></span>
  </footer>
</body>
</html>
