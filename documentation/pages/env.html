<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Environment (.env) &mdash; Razy Framework</title>
  <link rel="stylesheet" href="../css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;450;500;600;700;800&amp;family=JetBrains+Mono:wght@400;500;600&amp;display=swap" rel="stylesheet">
  <script src="../js/docs.js" defer></script>
</head>
<body>
  <header class="site-header"><button class="menu-toggle">&#9776;</button><a href="../index.html" class="header-logo"><span class="logo-icon">R</span> Razy <span class="header-version">v1.0-beta</span></a><nav class="header-nav"><a href="getting-started.html">Docs</a><a href="api-reference.html">API</a><a href="https://github.com/rayfunghk/razy" target="_blank">GitHub</a><button class="theme-toggle">&#x1F319;</button></nav></header>
  <aside class="sidebar"><div class="sidebar-group start-here"><div class="sidebar-group-title">&#x2B50; Start Here</div><a href="quick-start.html" class="sidebar-link">Quick Start (5 min)</a><a href="getting-started.html" class="sidebar-link">Installation</a><a href="standalone.html" class="sidebar-link">Standalone Mode</a><a href="tutorial.html" class="sidebar-link">Tutorial</a><a href="roadmap.html" class="sidebar-link">Learning Roadmap</a><a href="modules.html" class="sidebar-link">Module System</a><a href="routing.html" class="sidebar-link">Routing</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Overview</div><a href="../index.html" class="sidebar-link">Introduction</a><a href="architecture.html" class="sidebar-link">Architecture</a><a href="cli.html" class="sidebar-link">CLI Commands</a></div><div class="sidebar-group"><div class="sidebar-group-title">Module Development</div><a href="module-structure.html" class="sidebar-link">Module Structure</a><a href="controller.html" class="sidebar-link">Controller</a><a href="agent.html" class="sidebar-link">Agent</a><a href="events.html" class="sidebar-link">Event System</a><a href="cross-module-api.html" class="sidebar-link">Cross-Module API</a><a href="plugins.html" class="sidebar-link">Plugin System</a></div><div class="sidebar-group"><div class="sidebar-group-title">Routing &amp; Flow</div><a href="middleware.html" class="sidebar-link">Middleware</a><a href="pipeline.html" class="sidebar-link">Pipeline</a><a href="validation.html" class="sidebar-link">Validation</a><a href="container.html" class="sidebar-link">DI Container</a><a href="env.html" class="sidebar-link">Environment (.env)</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Data &amp; Storage</div><a href="database.html" class="sidebar-link">Database</a><a href="orm.html" class="sidebar-link">ORM</a><a href="collection.html" class="sidebar-link">Collection</a><a href="configuration.html" class="sidebar-link">Configuration</a><a href="cache.html" class="sidebar-link">Cache</a><a href="hashmap.html" class="sidebar-link">HashMap</a><a href="yaml.html" class="sidebar-link">YAML</a><a href="queue.html" class="sidebar-link">Queue</a></div><div class="sidebar-group"><div class="sidebar-group-title">Rendering</div><a href="template.html" class="sidebar-link">Template Engine</a><a href="dom.html" class="sidebar-link">DOM Builder</a><a href="simple-syntax.html" class="sidebar-link">Simple Syntax</a></div><div class="sidebar-group"><div class="sidebar-group-title">IO &amp; Communication</div><a href="httpclient.html" class="sidebar-link">HTTP Client</a><a href="xhr.html" class="sidebar-link">XHR</a><a href="sse.html" class="sidebar-link">SSE</a><a href="websocket.html" class="sidebar-link">WebSocket</a><a href="mailer.html" class="sidebar-link">Mailer</a><a href="simplified-message.html" class="sidebar-link">SimplifiedMessage</a><a href="filereader.html" class="sidebar-link">FileReader</a><a href="ftp-sftp.html" class="sidebar-link">FTP &amp; SFTP</a><a href="notification.html" class="sidebar-link">Notification</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Security</div><a href="crypt.html" class="sidebar-link">Crypt</a><a href="csrf.html" class="sidebar-link">CSRF Protection</a><a href="session.html" class="sidebar-link">Session</a><a href="oauth2.html" class="sidebar-link">OAuth2</a><a href="office365sso.html" class="sidebar-link">Office 365 SSO</a><a href="authenticator.html" class="sidebar-link">Authenticator (TOTP/HOTP)</a><a href="authmanager.html" class="sidebar-link">Auth Manager &amp; Gate</a><a href="ratelimiter.html" class="sidebar-link">Rate Limiter</a></div><div class="sidebar-group"><div class="sidebar-group-title">Observability</div><a href="logging.html" class="sidebar-link">Logging</a><a href="profiler.html" class="sidebar-link">Profiler</a><a href="error-handling.html" class="sidebar-link">Error Handling</a></div><div class="sidebar-group"><div class="sidebar-group-title">Advanced</div><a href="thread.html" class="sidebar-link">Thread &amp; ThreadManager</a><a href="worker-lifecycle.html" class="sidebar-link">Worker Lifecycle</a></div><hr class="sidebar-divider"><div class="sidebar-group"><div class="sidebar-group-title">Deployment</div><a href="sites-configuration.html" class="sidebar-link">Sites Configuration</a><a href="packaging.html" class="sidebar-link">Packaging &amp; Distribution</a><a href="publishing.html" class="sidebar-link">Repository &amp; Publishing</a><a href="caddy-worker.html" class="sidebar-link">Caddy Worker Mode</a></div><div class="sidebar-group"><div class="sidebar-group-title">Reference</div><a href="api-reference.html" class="sidebar-link">API Reference</a><a href="moduleinfo.html" class="sidebar-link">ModuleInfo</a><a href="utilities.html" class="sidebar-link">Utility Functions</a><a href="testing.html" class="sidebar-link">Testing</a></div></aside>
  <div class="sidebar-overlay"></div>

  <main class="main-content">
    <h1>Environment (.env)</h1>
    <p>Razy provides a static <strong><code>.env</code> file loader</strong> that parses environment variables and populates <code>$_ENV</code>, <code>$_SERVER</code>, and <code>putenv()</code>. It supports variable interpolation, multiline values, auto-casting, and the <code>export</code> prefix.</p>

    <h2 id="table-of-contents">Table of Contents</h2>
    <ul>
      <li><a href="#quick-start">Quick Start</a></li>
      <li><a href="#loading-env-files">Loading .env Files</a></li>
      <li><a href="#reading-variables">Reading Variables</a></li>
      <li><a href="#setting-variables">Setting Variables</a></li>
      <li><a href="#env-file-syntax">.env File Syntax</a></li>
      <li><a href="#auto-casting">Auto-Casting</a></li>
      <li><a href="#api-reference">API Reference</a></li>
    </ul>

    <hr>

    <h2 id="quick-start">Quick Start</h2>
    <pre><code><span class="hl-kw">use</span> <span class="hl-cls">Razy\Env</span>;

<span class="hl-cmt">// Load .env file</span>
<span class="hl-cls">Env</span>::<span class="hl-fn">load</span>(<span class="hl-kw">__DIR__</span> . <span class="hl-str">'/.env'</span>);

<span class="hl-cmt">// Read values</span>
<span class="hl-var">$dbHost</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'DB_HOST'</span>, <span class="hl-str">'localhost'</span>);
<span class="hl-var">$debug</span>  = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'APP_DEBUG'</span>); <span class="hl-cmt">// auto-cast: 'true' &rarr; true</span>

<span class="hl-cmt">// Required values (throws RuntimeException if missing)</span>
<span class="hl-var">$secret</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">getRequired</span>(<span class="hl-str">'APP_SECRET'</span>);</code></pre>

    <hr>

    <h2 id="loading-env-files">Loading .env Files</h2>
    <pre><code><span class="hl-kw">use</span> <span class="hl-cls">Razy\Env</span>;

<span class="hl-cmt">// Load &mdash; throws RuntimeException if file not found</span>
<span class="hl-cls">Env</span>::<span class="hl-fn">load</span>(<span class="hl-str">'/path/to/.env'</span>);

<span class="hl-cmt">// Load with overwrite &mdash; overrides existing env variables</span>
<span class="hl-cls">Env</span>::<span class="hl-fn">load</span>(<span class="hl-str">'/path/to/.env'</span>, overwrite: <span class="hl-kw">true</span>);

<span class="hl-cmt">// Load if exists &mdash; silently skip if file doesn't exist</span>
<span class="hl-var">$loaded</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">loadIfExists</span>(<span class="hl-str">'/path/to/.env.local'</span>);     <span class="hl-cmt">// returns bool</span>
<span class="hl-var">$loaded</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">loadIfExists</span>(<span class="hl-str">'/path/to/.env.local'</span>, overwrite: <span class="hl-kw">true</span>);

<span class="hl-cmt">// Check initialization state</span>
<span class="hl-cls">Env</span>::<span class="hl-fn">isInitialized</span>(); <span class="hl-cmt">// true after first load()</span>

<span class="hl-cmt">// Parse raw content without loading into environment</span>
<span class="hl-var">$vars</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">parse</span>(<span class="hl-fn">file_get_contents</span>(<span class="hl-str">'.env'</span>));
<span class="hl-cmt">// Returns: ['DB_HOST' =&gt; 'localhost', 'DB_PORT' =&gt; '3306', ...]</span></code></pre>

    <hr>

    <h2 id="reading-variables">Reading Variables</h2>
    <pre><code><span class="hl-kw">use</span> <span class="hl-cls">Razy\Env</span>;

<span class="hl-cmt">// Get with default</span>
<span class="hl-var">$host</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'DB_HOST'</span>, <span class="hl-str">'localhost'</span>);

<span class="hl-cmt">// Get with auto-casting enabled (default)</span>
<span class="hl-var">$debug</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'APP_DEBUG'</span>);       <span class="hl-cmt">// 'true' &rarr; true (bool)</span>
<span class="hl-var">$port</span>  = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'DB_PORT'</span>);          <span class="hl-cmt">// remains string '3306'</span>

<span class="hl-cmt">// Get without casting</span>
<span class="hl-var">$raw</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'APP_DEBUG'</span>, <span class="hl-kw">null</span>, cast: <span class="hl-kw">false</span>); <span class="hl-cmt">// 'true' (string)</span>

<span class="hl-cmt">// Check existence</span>
<span class="hl-kw">if</span> (<span class="hl-cls">Env</span>::<span class="hl-fn">has</span>(<span class="hl-str">'REDIS_URL'</span>)) {
    <span class="hl-var">$redis</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'REDIS_URL'</span>);
}

<span class="hl-cmt">// Required &mdash; throws RuntimeException if not set</span>
<span class="hl-var">$secret</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">getRequired</span>(<span class="hl-str">'APP_SECRET'</span>);
<span class="hl-var">$apiKey</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">getRequired</span>(<span class="hl-str">'API_KEY'</span>, cast: <span class="hl-kw">false</span>);

<span class="hl-cmt">// Get all loaded variables</span>
<span class="hl-var">$all</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">all</span>(); <span class="hl-cmt">// ['DB_HOST' =&gt; 'localhost', 'APP_DEBUG' =&gt; 'true', ...]</span></code></pre>

    <p><strong>Resolution order:</strong> loaded cache &rarr; <code>$_ENV</code> &rarr; <code>$_SERVER</code> &rarr; <code>getenv()</code></p>

    <hr>

    <h2 id="setting-variables">Setting Variables</h2>
    <pre><code><span class="hl-kw">use</span> <span class="hl-cls">Razy\Env</span>;

<span class="hl-cmt">// Set a variable (updates $_ENV, $_SERVER, and putenv)</span>
<span class="hl-cls">Env</span>::<span class="hl-fn">set</span>(<span class="hl-str">'CUSTOM_VAR'</span>, <span class="hl-str">'custom_value'</span>);

<span class="hl-cmt">// Reset all loaded state</span>
<span class="hl-cls">Env</span>::<span class="hl-fn">reset</span>();</code></pre>

    <hr>

    <h2 id="env-file-syntax">.env File Syntax</h2>

    <h3>Basic Key-Value</h3>
    <pre><code>APP_NAME=MyApp
DB_HOST=localhost
DB_PORT=3306</code></pre>

    <h3>Quoted Values</h3>
    <pre><code><span class="hl-cmt"># Double-quoted &mdash; supports escape sequences and interpolation</span>
APP_TITLE="My Application"
GREETING="Hello, ${APP_NAME}!"

<span class="hl-cmt"># Single-quoted &mdash; literal (no interpolation, no escapes)</span>
REGEX='^[a-z]+$'

<span class="hl-cmt"># Unquoted &mdash; trimmed, no interpolation</span>
SIMPLE_VALUE=hello world</code></pre>

    <h3>Comments</h3>
    <pre><code><span class="hl-cmt"># This is a comment</span>
APP_NAME=MyApp  <span class="hl-cmt"># Inline comments in unquoted values</span>
APP_DESC="Has # inside"  <span class="hl-cmt"># Hash inside quotes is not a comment</span></code></pre>

    <h3>Export Prefix</h3>
    <pre><code><span class="hl-kw">export</span> APP_ENV=production
<span class="hl-kw">export</span> DB_HOST=db.example.com</code></pre>

    <h3>Variable Interpolation</h3>
    <p>Only in <strong>double-quoted</strong> values:</p>
    <pre><code>BASE_URL="https://example.com"
API_URL="${BASE_URL}/api/v1"
FULL_URL="$BASE_URL/api"</code></pre>

    <h3>Multiline Values</h3>
    <p>Only in <strong>double-quoted</strong> values:</p>
    <pre><code>RSA_KEY="-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA0Z3VS5JJcds3xfn/yQ==
-----END RSA PRIVATE KEY-----"</code></pre>

    <h3>Escape Sequences</h3>
    <p>In double-quoted values:</p>
    <table>
      <thead><tr><th>Sequence</th><th>Result</th></tr></thead>
      <tbody>
        <tr><td><code>\\</code></td><td>Backslash</td></tr>
        <tr><td><code>\"</code></td><td>Double quote</td></tr>
        <tr><td><code>\n</code></td><td>Newline</td></tr>
        <tr><td><code>\r</code></td><td>Carriage return</td></tr>
        <tr><td><code>\t</code></td><td>Tab</td></tr>
        <tr><td><code>\$</code></td><td>Literal dollar sign</td></tr>
      </tbody>
    </table>

    <h3>Empty Values</h3>
    <pre><code>EMPTY_VALUE=
ALSO_EMPTY=""</code></pre>

    <hr>

    <h2 id="auto-casting">Auto-Casting</h2>
    <p>When <code>$cast = true</code> (default), the following string values are converted:</p>
    <table>
      <thead><tr><th>.env Value</th><th>PHP Type</th><th>PHP Value</th></tr></thead>
      <tbody>
        <tr><td><code>true</code></td><td><code>bool</code></td><td><code>true</code></td></tr>
        <tr><td><code>false</code></td><td><code>bool</code></td><td><code>false</code></td></tr>
        <tr><td><code>null</code></td><td><code>null</code></td><td><code>null</code></td></tr>
        <tr><td><code>(empty)</code></td><td><code>string</code></td><td><code>''</code></td></tr>
      </tbody>
    </table>

    <pre><code><span class="hl-cmt">// .env: APP_DEBUG=true</span>
<span class="hl-var">$debug</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'APP_DEBUG'</span>);         <span class="hl-cmt">// bool true</span>
<span class="hl-var">$debug</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'APP_DEBUG'</span>, cast: <span class="hl-kw">false</span>); <span class="hl-cmt">// string 'true'</span>

<span class="hl-cmt">// .env: LOG_LEVEL=null</span>
<span class="hl-var">$level</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'LOG_LEVEL'</span>);         <span class="hl-cmt">// null</span>
<span class="hl-var">$level</span> = <span class="hl-cls">Env</span>::<span class="hl-fn">get</span>(<span class="hl-str">'LOG_LEVEL'</span>, cast: <span class="hl-kw">false</span>); <span class="hl-cmt">// string 'null'</span></code></pre>

    <hr>

    <h2 id="api-reference">API Reference</h2>
    <table>
      <thead><tr><th>Method</th><th>Signature</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td><code>load</code></td><td><code>(string $path, bool $overwrite = false): void</code></td><td>Load .env file (throws on missing)</td></tr>
        <tr><td><code>loadIfExists</code></td><td><code>(string $path, bool $overwrite = false): bool</code></td><td>Load if file exists</td></tr>
        <tr><td><code>parse</code></td><td><code>(string $content): array</code></td><td>Parse raw content to key-value array</td></tr>
        <tr><td><code>get</code></td><td><code>(string $key, mixed $default = null, bool $cast = true): mixed</code></td><td>Get variable</td></tr>
        <tr><td><code>has</code></td><td><code>(string $key): bool</code></td><td>Check existence</td></tr>
        <tr><td><code>set</code></td><td><code>(string $name, string $value): void</code></td><td>Set variable</td></tr>
        <tr><td><code>all</code></td><td><code>(): array</code></td><td>All loaded variables</td></tr>
        <tr><td><code>isInitialized</code></td><td><code>(): bool</code></td><td>Check if loaded</td></tr>
        <tr><td><code>getRequired</code></td><td><code>(string $key, bool $cast = true): mixed</code></td><td>Get or throw RuntimeException</td></tr>
        <tr><td><code>reset</code></td><td><code>(): void</code></td><td>Clear all loaded state</td></tr>
      </tbody>
    </table>

    <div class="page-nav">
      <a href="validation.html"><span class="label">&larr; Previous</span><span class="title">Validation</span></a>
      <a href="database.html" class="next"><span class="label">Next &rarr;</span><span class="title">Database</span></a>
    </div>
  </main>
  <footer class="site-footer"><span>Razy Framework v1.0-beta</span><span><a href="https://github.com/rayfunghk/razy" target="_blank">GitHub</a></span></footer>
</body>
</html>